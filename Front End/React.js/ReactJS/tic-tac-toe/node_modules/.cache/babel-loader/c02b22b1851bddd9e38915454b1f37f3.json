{"ast":null,"code":"import _toConsumableArray from \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/src/components/game.jsx\";\nimport React, { Component } from \"react\";\nimport Box from \"./box\";\nimport Button from \"./button\";\n\nvar Game =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Game, _Component);\n\n  function Game() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Game);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Game)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      boxes: [{\n        id: 1,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 2,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 3,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 4,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 5,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 6,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 7,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 8,\n        value: \"\",\n        clicked: false\n      }, {\n        id: 9,\n        value: \"\",\n        clicked: false\n      }],\n      X_turn: true,\n      X_pos: [],\n      O_pos: [],\n      asideText: \"Next player: X\",\n      win_poses: [[1, 2, 3], [4, 5, 6], [7, 8, 9], [1, 4, 7], [2, 5, 8], [3, 6, 9], [1, 5, 9], [3, 5, 7]]\n    };\n\n    _this.handleClick = function (box) {\n      if (!box.clicked) {\n        var X_turn = _this.state.X_turn;\n        var boxes = JSON.parse(JSON.stringify(_this.state.boxes));\n        var index = boxes.filter(function (b) {\n          return b.id === box.id;\n        })[0].id - 1;\n        boxes[index].clicked = true;\n        boxes[index].value = _this.state.X_turn ? \"X\" : \"O\";\n        var pos = box.id;\n\n        var X_pos = _toConsumableArray(_this.state.X_pos);\n\n        var O_pos = _toConsumableArray(_this.state.O_pos);\n\n        if (X_turn) {\n          X_pos.push(pos);\n        } else {\n          O_pos.push(pos);\n        }\n\n        var gameOver = false;\n        var gameDraw = false;\n\n        if (X_turn) {\n          gameOver = _this.state.win_poses.some(function (v1) {\n            return v1.every(function (v2) {\n              return X_pos.indexOf(v2) !== -1;\n            });\n          });\n        } else {\n          gameOver = _this.state.win_poses.some(function (v1) {\n            return v1.every(function (v2) {\n              return O_pos.indexOf(v2) !== -1;\n            });\n          });\n        }\n\n        var asideText = \"Next player: \";\n        asideText += !X_turn ? \"X\" : \"O\";\n\n        if (gameOver) {\n          var winner = X_turn ? \"X\" : \"O\";\n          asideText = \"Winner: \" + winner;\n          var boxesOver = boxes.map(function (box) {\n            box.clicked = true;\n            return box;\n          });\n\n          _this.setState({\n            boxes: boxesOver,\n            asideText: asideText\n          });\n        } else if (X_pos.length + O_pos.length === 9) {\n          gameDraw = true;\n          asideText = \"Draw\";\n        }\n\n        X_turn = !X_turn;\n        var totalLength = X_pos.length + O_pos.length;\n        var history = JSON.parse(JSON.stringify(_this.state.history));\n        history.splice(totalLength, history.length - totalLength);\n        history.push({\n          move: totalLength,\n          boxes: boxes,\n          X_turn: X_turn,\n          X_pos: X_pos,\n          O_pos: O_pos,\n          asideText: asideText\n        });\n\n        if (gameOver) {\n          _this.setState({\n            X_turn: X_turn,\n            X_pos: X_pos,\n            O_pos: O_pos,\n            asideText: asideText,\n            history: history\n          });\n        } else if (gameDraw) {\n          _this.setState({\n            boxes: boxes,\n            X_turn: X_turn,\n            X_pos: X_pos,\n            O_pos: O_pos,\n            asideText: asideText,\n            history: history\n          });\n        } else {\n          _this.setState({\n            boxes: boxes,\n            X_turn: X_turn,\n            X_pos: X_pos,\n            O_pos: O_pos,\n            asideText: asideText,\n            history: history\n          });\n        }\n      }\n    };\n\n    _this.handleBtnClick = function (hist) {\n      var boxes = JSON.parse(JSON.stringify(hist.boxes));\n      var X_turn = hist.X_turn;\n      var X_pos = hist.X_pos;\n      var O_pos = hist.O_pos;\n      var asideText = hist.asideText;\n\n      _this.setState({\n        boxes: boxes,\n        X_turn: X_turn,\n        X_pos: X_pos,\n        O_pos: O_pos,\n        asideText: asideText\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Game, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        history: [{\n          move: 0,\n          boxes: this.state.boxes.map(function (b) {\n            return b;\n          }),\n          X_turn: this.state.X_turn,\n          X_pos: this.state.X_pos,\n          O_pos: this.state.O_pos,\n          asideText: this.state.asideText\n        }]\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"game\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, this.state.boxes.map(function (box) {\n        return React.createElement(Box, {\n          key: box.id,\n          onClick: _this2.handleClick,\n          box: box,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, box.value);\n      })), React.createElement(\"span\", {\n        className: \"aside\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, this.state.asideText, React.createElement(\"div\", {\n        className: \"game-history\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.history.map(function (hist) {\n        return React.createElement(\"li\", {\n          key: hist.move,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(Button, {\n          hist: hist,\n          onBtnClick: _this2.handleBtnClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }));\n      })))));\n    }\n  }]);\n\n  return Game;\n}(Component);\n\nexport default Game;","map":{"version":3,"sources":["/opt/lampp/htdocs/WebDev/Front End/React.js/ReactJS/tic-tac-toe/src/components/game.jsx"],"names":["React","Component","Box","Button","Game","state","boxes","id","value","clicked","X_turn","X_pos","O_pos","asideText","win_poses","handleClick","box","JSON","parse","stringify","index","filter","b","pos","push","gameOver","gameDraw","some","v1","every","v2","indexOf","winner","boxesOver","map","setState","length","totalLength","history","splice","move","handleBtnClick","hist"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Box from \"./box\";\nimport Button from \"./button\";\n\nclass Game extends Component {\n  state = {\n    boxes: [\n      { id: 1, value: \"\", clicked: false },\n      { id: 2, value: \"\", clicked: false },\n      { id: 3, value: \"\", clicked: false },\n      { id: 4, value: \"\", clicked: false },\n      { id: 5, value: \"\", clicked: false },\n      { id: 6, value: \"\", clicked: false },\n      { id: 7, value: \"\", clicked: false },\n      { id: 8, value: \"\", clicked: false },\n      { id: 9, value: \"\", clicked: false }\n    ],\n    X_turn: true,\n    X_pos: [],\n    O_pos: [],\n    asideText: \"Next player: X\",\n    win_poses: [\n      [1, 2, 3],\n      [4, 5, 6],\n      [7, 8, 9],\n      [1, 4, 7],\n      [2, 5, 8],\n      [3, 6, 9],\n      [1, 5, 9],\n      [3, 5, 7]\n    ]\n  };\n  componentWillMount() {\n    this.setState({\n      history: [\n        {\n          move: 0,\n          boxes: this.state.boxes.map(b => b),\n          X_turn: this.state.X_turn,\n          X_pos: this.state.X_pos,\n          O_pos: this.state.O_pos,\n          asideText: this.state.asideText\n        }\n      ]\n    });\n  }\n  handleClick = box => {\n    if (!box.clicked) {\n      let X_turn = this.state.X_turn;\n      let boxes = JSON.parse(JSON.stringify(this.state.boxes));\n      const index = boxes.filter(b => b.id === box.id)[0].id - 1;\n      boxes[index].clicked = true;\n      boxes[index].value = this.state.X_turn ? \"X\" : \"O\";\n\n      let pos = box.id;\n      let X_pos = [...this.state.X_pos];\n      let O_pos = [...this.state.O_pos];\n      if (X_turn) {\n        X_pos.push(pos);\n      } else {\n        O_pos.push(pos);\n      }\n\n      let gameOver = false;\n      let gameDraw = false;\n      if (X_turn) {\n        gameOver = this.state.win_poses.some(v1 =>\n          v1.every(v2 => X_pos.indexOf(v2) !== -1)\n        );\n      } else {\n        gameOver = this.state.win_poses.some(v1 =>\n          v1.every(v2 => O_pos.indexOf(v2) !== -1)\n        );\n      }\n\n      let asideText = \"Next player: \";\n      asideText += !X_turn ? \"X\" : \"O\";\n\n      if (gameOver) {\n        let winner = X_turn ? \"X\" : \"O\";\n        asideText = \"Winner: \" + winner;\n        let boxesOver = boxes.map(box => {\n          box.clicked = true;\n          return box;\n        });\n        this.setState({ boxes: boxesOver, asideText });\n      } else if (X_pos.length + O_pos.length === 9) {\n        gameDraw = true;\n        asideText = \"Draw\";\n      }\n\n      X_turn = !X_turn;\n\n      let totalLength = X_pos.length + O_pos.length;\n      let history = JSON.parse(JSON.stringify(this.state.history));\n      history.splice(totalLength, history.length - totalLength);\n      history.push({\n        move: totalLength,\n        boxes: boxes,\n        X_turn: X_turn,\n        X_pos: X_pos,\n        O_pos: O_pos,\n        asideText: asideText\n      });\n      if (gameOver) {\n        this.setState({ X_turn, X_pos, O_pos, asideText, history });\n      } else if (gameDraw) {\n        this.setState({ boxes, X_turn, X_pos, O_pos, asideText, history });\n      } else {\n        this.setState({ boxes, X_turn, X_pos, O_pos, asideText, history });\n      }\n    }\n  };\n  handleBtnClick = hist => {\n    let boxes = JSON.parse(JSON.stringify(hist.boxes));\n    let X_turn = hist.X_turn;\n    let X_pos = hist.X_pos;\n    let O_pos = hist.O_pos;\n    let asideText = hist.asideText;\n    this.setState({ boxes, X_turn, X_pos, O_pos, asideText });\n  };\n  render() {\n    return (\n      <div className=\"container\">\n        <div className=\"game\">\n          {this.state.boxes.map(box => (\n            <Box key={box.id} onClick={this.handleClick} box={box}>\n              {box.value}\n            </Box>\n          ))}\n        </div>\n        <span className=\"aside\">\n          {this.state.asideText}\n          <div className=\"game-history\">\n            <ul>\n              {this.state.history.map(hist => (\n                <li key={hist.move}>\n                  <Button hist={hist} onBtnClick={this.handleBtnClick} />\n                </li>\n              ))}\n            </ul>\n          </div>\n        </span>\n        {/*  */}\n      </div>\n    );\n  }\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}